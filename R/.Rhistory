data.frame(
stringsAsFactors = FALSE,
check.names = FALSE,
`industry	series` = c("All Industries\"\tLUU0204906600",
"Mining, quarrying, and oil and gas extraction\tLUU0204910400","Construction\tLUU0204910500",
"Manufacturing\tLUU0204910600",
"Wholesale and retail trade\tLUU0204910900",
"Transportation and utilities\tLUU0204911200","Information\tLUU0204911500",
"Financial activities\tLUU0204912300",
"Professional and business services\tLUU0204912800",
"Education and health services\tLUU0204913100","Leisure and hospitality\tLUU0204913400",
"Other services\tLUU0204913900")
)
library(readr)
series <- read_csv("Desktop/series.csv")
View(series)
df <- bls_api(series$series,
startyear = 2001,
endyear = 2022,
annualaverage=TRUE,
Sys.getenv("BLS_KEY")
)
View(df)
series <- read_csv('~/Desktop/series.csv')
df %>% left_join(series)
View(df)
df %>% left_join(series, by=c("seriesId"="industry"))
View(df)
df %>% left_join(series, by=c("seriesID"="industry"))
View(series)
series <- read_csv('~/Desktop/series.csv')
df %>% left_join(series, by=c("seriesID"="industry")) %>%  View()
left_join(df, series, by=c("seriesID"="industry")) %>%  View()
df
series
left_join(df, series, by=c("seriesID"="series")) %>%  View()
df2 <- left_join(df, series, by=c("seriesID"="series")) %>%  View()
df2 <- left_join(df, series, by=c("seriesID"="series"))
library(ggplot)
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line()
library(ggplot2)
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line()
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line() +
facet_wrap(~industry)
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line() +
facet_wrap(~industry) +
theme(legend.position="none")
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line() +
facet_wrap(~industry) +
theme(legend.position="none") +
labs(title="Percent of employed, private wage and salary workers, Members of unions")
View(df)
library(clipr)
write_clip(df2)
df2 %>%
select(year, industry, value)
df2 %>%
select(year, industry, value) %>%
split(.$industry) %>%
map(~add_row(., year=2021, industry=industry=NA, value=NA)) %>%
bind_rows()
df2 %>%
select(year, industry, value) %>%
split(.$industry) %>%
map(~add_row(., year=2021, industry=.$industry=NA, value=NA)) %>%
bind_rows()
df2 %>%
select(year, industry, value) %>%
split(industry) %>%
map(~add_row(., year=2021, industry=.$industry=NA, value=NA)) %>%
bind_rows()
df2 %>%
select(year, industry, value) %>%
split(industry)
df2 %>%
select(year, industry, value) %>%
split(.$industry)
df2 %>%
select(year, industry, value) %>%
split(.$industry) %>%
map(~add_row(., year=2021, industry=.$industry=NA, value=NA))
df2 %>%
select(year, industry, value) %>%
split(.$industry) %>%
map(~add_row(., year=2021, industry=.$industry=NA, value=NA))
df2 %>%
select(year, industry, value) %>%
split(.$industry) %>%
map(~add_row(., year=2021, industry=.$industry=NA, value=NA)) %>%
bind_rows()
df2 %>%
select(year, industry, value) %>% write_clip()
y21_data <-  tibble::tribble(
~year,                                       ~industry, ~value,
2021L,                                "All Industries",    6.1,
2021L, "Mining, quarrying, and oil and gas extraction",    5.7,
2021L,                                  "Construction",   12.6,
2021L,                                 "Manufacturing",    7.7,
2021L,                    "Wholesale and retail trade",    4.3,
2021L,                  "Transportation and utilities",   15.4,
2021L,                                   "Information",     10,
2021L,                          "Financial activities",    2.3,
2021L,            "Professional and business services",    2.2,
2021L,                 "Education and health services",    7.9,
2021L,                       "Leisure and hospitality",    2.2,
2021L,                                "Other services",    3.1
)
df2 <- left_join(df, series, by=c("seriesID"="series")) %>%
select(year, industry, value)
y21_data <-  tibble::tribble(
~year,                                       ~industry, ~value,
2021L,                                "All Industries",    6.1,
2021L, "Mining, quarrying, and oil and gas extraction",    5.7,
2021L,                                  "Construction",   12.6,
2021L,                                 "Manufacturing",    7.7,
2021L,                    "Wholesale and retail trade",    4.3,
2021L,                  "Transportation and utilities",   15.4,
2021L,                                   "Information",     10,
2021L,                          "Financial activities",    2.3,
2021L,            "Professional and business services",    2.2,
2021L,                 "Education and health services",    7.9,
2021L,                       "Leisure and hospitality",    2.2,
2021L,                                "Other services",    3.1
)
bind_rows(df2, y21_data)
bind_rows(df2, y21_data) %>%
arrange(industry, year)
bind_rows(df2, y21_data) %>%
arrange(desc(industry), year)
bind_rows(df2, y21_data) %>%
arrange(industry, desc(year))
df2 <- left_join(df, series, by=c("seriesID"="series")) %>%
select(year, industry, value) %>%
bind_rows(y21_data) %>%
arrange(industry, desc(year))
y21_data <-  tibble::tribble(
~year,                                       ~industry, ~value,
2021L,                                "All Industries",    6.1,
2021L, "Mining, quarrying, and oil and gas extraction",    5.7,
2021L,                                  "Construction",   12.6,
2021L,                                 "Manufacturing",    7.7,
2021L,                    "Wholesale and retail trade",    4.3,
2021L,                  "Transportation and utilities",   15.4,
2021L,                                   "Information",     10,
2021L,                          "Financial activities",    2.3,
2021L,            "Professional and business services",    2.2,
2021L,                 "Education and health services",    7.9,
2021L,                       "Leisure and hospitality",    2.2,
2021L,                                "Other services",    3.1
)
df2 <- left_join(df, series, by=c("seriesID"="series")) %>%
select(year, industry, value) %>%
bind_rows(y21_data) %>%
arrange(industry, desc(year))
df2 %>%
ggplot(aes(
x = year,
y = value,
color = industry
)) +
geom_line() +
facet_wrap(~industry) +
theme(legend.position="none") +
labs(title="Percent of employed, private wage and salary workers, Members of unions")
wd="~/Documents/GitHub/2022/2022-07/2022-07-22-city-canopy/"
setwd(wd)
# assign raster to object
dsm <- raster(paste0(wd,"NEON-DS-Field-Site-Spatial-Data/SJER/DigitalSurfaceModel/SJER2013_DSM.tif"))
# Load needed packages
library(raster)
library(rgdal)
# assign raster to object
dsm <- raster(paste0(wd,"NEON-DS-Field-Site-Spatial-Data/SJER/DigitalSurfaceModel/SJER2013_DSM.tif"))
# view info about the raster.
dsm
# plot the DSM
plot(dsm, main="Lidar Digital Surface Model \n SJER, California")
library(tidyverse)
d <- read_csv("Downloads/gifts.csv")
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point()
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value")
View(d)
d %>%
ggplot(aes(
x = year_received,
y = value_usd,
color = donor_country
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value")
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value")
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value") +
geom_vline(xintercept = 2008, linetype="dotted",
color = "blue", size=1.5)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value") +
geom_vline(xintercept = 2008)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value") +
geom_vline(xintercept = 2008) +
geom_vline(xintercept = 20015)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value") +
geom_vline(xintercept = 2009) +
geom_vline(xintercept = 20015)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value") +
geom_vline(xintercept = 2009) +
geom_vline(xintercept = 2015)
d %>%
ggplot(aes(
x = year_received,
y = value_usd
)) +
geom_point() +
xlim(2000, 2020) +
labs(title = "Gifts to POTUS by year and value")
library(rjson)
j <- fromJSON("Documents/GitHub/personal projects/mwy-farewell-tracker/src/data/shows.json")
j <- fromJSON("Documents/GitHub/personal projects/mwy-farewell-tracker/src/data/shows.json")
j <- fromJSON("Documents/GitHub/personal projects/mwy-farewell-tracker/src/data/shows2.json")
library(spotifyr)
library(rjson)
library(rjson)
library(jsonlite)
setwd("~/Documents/GitHub/personal projects/mwy-farewell-tracker/R")
x <- jsonlite::read_json("../src/data/shows.json")
View(x)
x[[1]][["setlist"]][[1]][["tracks"]][[1]][["preview_url"]]
get_track("774b29d4f13844c495f206cafdad9c86")
Sys.setenv(SPOTIFY_CLIENT_ID = 'f178f6312b6c49cba9eaf98a5c40f1a9')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'f5fb061be4924142a596b362415c3b19')
access_token <- get_spotify_access_token()
get_track("774b29d4f13844c495f206cafdad9c86")
?get_track
get_track("774b29d4f13844c495f206cafdad9c86", authorization = access_token)
get_track("769e9fab3336e65531c1f2915e3d6e6ade0ef294", authorization = access_token)
get_track(id="774b29d4f13844c495f206cafdad9c86", authorization = access_token)
?get_artist
x <- jsonlite::read_json("../src/data/shows.json")
View(x)
x[[1]][["setlist"]][[1]][["tracks"]][[1]][["id"]]
get_track(id="2JsQHMl5Wqcy6Likcf9mmh", authorization = access_token)
x[[1]]
x[[1]]$setlist
discography = x[[1]]$setlist
View(discography)
unlist(discography)
unlist(discography) %>%  View()
?get_discography()
discography <- get_discography(artist = 'mewithoutYou', authorization = access_token)
x[[1]]$setlist
discography <- get_discography(artist = 'mewithoutYou', authorization = access_token)
View(discography)
View(discography)
View(discography[[41]][[55]])
View(discography[[41]][[1]])
discography[[41]][[1]]
View(x)
x[[1]]
x[[1]] %>% View()
View(x)
x[44] %>% View()
makePlaylist <- function(x) {
}
makePlaylist <- function(x) {
date <- x$date
print(date)
}
makePlaylist(x[44])
}
makePlaylist(x[44])
makePlaylist <- function(x) {
date <- x[[1]]$date
print(date)
}
makePlaylist(x[44])
makePlaylist <- function(x) {
date <- x$date
print(date)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
date <- substr(x$date,1,10)
venue <- x$venue
print(date)
}
makePlaylist(x[44][[1]])
View(x)
makePlaylist <- function(x) {
date <-
venue <- x$venue
name <- paste0(x$venue, ", ", x$city, ", ", x$state, " - ", substr(x$date,1,10))
print(name)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
date <-
venue <- x$venue
name <- paste0(x$venue, ", ", x$city, ", ", x$state, " / ", substr(x$date,1,10))
print(name)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
date <-
venue <- x$venue
name <- paste0(x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
print(name)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
date <-
venue <- x$venue
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
print(name)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
setlist <- x$setlistFlat
print(setlist)
}
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
setlist <- x$setlistFlat
ids <- c()
for (song in setlist) {
print(song)
}
}
makePlaylist(x[44][[1]])
library(dplyr)
View(discography)
makePlaylist <- function(x) {
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
setlist <- x$setlistFlat
ids <- c()
for (song in setlist) {
track_id <- discography %>%
filter(track_name == song) %>%
head(1) %>%
pull(track_id)
print(paste0(song, " - ", track_id))
}
}
makePlaylist(x[44][[1]])
normalize <- function(str) {
return(tolower(str_replace_all(str, "[^[:alnum:]]", " ")))
}
makePlaylist <- function(x) {
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
setlist <- x$setlistFlat
ids <- c()
for (song in setlist) {
track_id <- discography %>%
filter(track_name == song) %>%
head(1) %>%
pull(track_id)
print(paste0(normalize(song), " - ", track_id))
}
}
makePlaylist(x[44][[1]])
library(stringr)
makePlaylist(x[44][[1]])
makePlaylist <- function(x) {
name <- paste0("mewithoutYou @ ", x$venue, ", ", x$city, ", ", x$state, " on ", substr(x$date,1,10))
setlist <- x$setlistFlat
ids <- c()
for (song in setlist) {
track_id <- discography %>%
filter(normalize(track_name) == normalize(song)) %>%
head(1) %>%
pull(track_id)
print(paste0(song, " - ", track_id))
}
}
makePlaylist(x[44][[1]])
View(x)
View(discography)
discography <- get_discography(artist = 'mewithoutYou', authorization = access_token)
View(x)
x[44][[1]]$setlist
unlist(x[44][[1]]$setlist)
unlist(x[44][[1]]$setlist) %>%  View()
x[44][[1]]$setlist %>%  View()
for (album in x[44][[1]]$setlist) {
print(album$tracks)
}
for (album in x[44][[1]]$setlist) {
print(unlist(album$tracks))
}
for (album in x[44][[1]]$setlist) {
a <- data_frame(album$tracks)
print(a)
}
}
for (album in x[44][[1]]$setlist) {
#   a <- data_frame(album$tracks)
print(album)
}
x[44][[1]]$setlist[1]
x[44][[1]]$setlist[1] %>% View()
x[44][[1]]$setlist[[1]] %>% View()
x[44][[1]]$setlist[[1]]$tracks %>% View()
x[44][[1]]$setlist[[1]]$tracks[[1]] %>% View()
x[44][[1]]$setlist[[1]]$tracks[[1]] %>% View()
data_frame(x[44][[1]]$setlist[[1]]$tracks[[1]] )%>% View()
as.data.frame(x[44][[1]]$setlist[[1]]$tracks[[1]] )%>% View()
for (album in x[44][[1]]$setlist) {
a <- as.data.frame(album$tracks)
print(a)
}
for (album in x[44][[1]]$setlist) {
a <- as.data.frame(album$tracks[[1]])
print(a)
}
songs_list <- list()
for (album in x[44][[1]]$setlist) {
a <- as.data.frame(album$tracks[[1]])
songs_list[[length(songs_list) + 1]] <- a
}
bind_rows(songs_list)
bind_rows(songs_list) %>%  View()
